(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[97],{1372:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Z}));var a=n(0),c=n.n(a),r=n(423),l=n(941),o=n(74),i=n(131),s=n(460),u=n(623),d=n(56),b=n(212),m=n(4);function p(){var e=Object(i.e)(),t=e.onOk,n=e.form;return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(i.d,{requiredRoles:["Administrator"],requiredAccessControls:d.a.Create,allowedWithOneWayGitSync:!0,children:Object(m.jsx)(o.a,{children:"Export Configuration as Template"})}),Object(m.jsx)(i.b,{title:"Export Configuration as Template",onClickOk:function(){t("/template/export","create",{})},children:Object(m.jsx)(b.b,{schemaName:"template",children:Object(m.jsx)(b.d,{name:"create_template_form",form:n,preserve:!1})})})]})}var j=n(12),f=n(49),v=n.n(f),O=n(86),h=n(25),x=n(455),y=n(691),C=n(422),g=n(1505),w=n(920),E=n(7),S=n(10),k=n(16),N=n(9),T=n.n(N),P=n(66),I=n(127),F=n(33),A=n(81),D=n(6);function L(e){return void 0!==e&&null!==e}var q=function(e){var t,n=e.itemPrefixCls,c=e.component,r=e.span,l=e.className,o=e.style,i=e.labelStyle,s=e.contentStyle,u=e.bordered,d=e.label,b=e.content,m=e.colon,p=c;return u?a.createElement(p,{className:T()((t={},Object(E.a)(t,"".concat(n,"-item-label"),L(d)),Object(E.a)(t,"".concat(n,"-item-content"),L(b)),t),l),style:o,colSpan:r},L(d)&&a.createElement("span",{style:i},d),L(b)&&a.createElement("span",{style:s},b)):a.createElement(p,{className:T()("".concat(n,"-item"),l),style:o,colSpan:r},a.createElement("div",{className:"".concat(n,"-item-container")},d&&a.createElement("span",{className:T()("".concat(n,"-item-label"),Object(E.a)({},"".concat(n,"-item-no-colon"),!m)),style:i},d),b&&a.createElement("span",{className:T()("".concat(n,"-item-content")),style:s},b)))};function V(e,t,n){var c=t.colon,r=t.prefixCls,l=t.bordered,o=n.component,i=n.type,s=n.showLabel,u=n.showContent,d=n.labelStyle,b=n.contentStyle;return e.map((function(e,t){var n=e.props,m=n.label,p=n.children,j=n.prefixCls,f=void 0===j?r:j,v=n.className,O=n.style,h=n.labelStyle,x=n.contentStyle,y=n.span,C=void 0===y?1:y,g=e.key;return"string"===typeof o?a.createElement(q,{key:"".concat(i,"-").concat(g||t),className:v,style:O,labelStyle:Object(D.a)(Object(D.a)({},d),h),contentStyle:Object(D.a)(Object(D.a)({},b),x),span:C,colon:c,component:o,itemPrefixCls:f,bordered:l,label:s?m:null,content:u?p:null}):[a.createElement(q,{key:"label-".concat(g||t),className:v,style:Object(D.a)(Object(D.a)(Object(D.a)({},d),O),h),span:1,colon:c,component:o[0],itemPrefixCls:f,bordered:l,label:m}),a.createElement(q,{key:"content-".concat(g||t),className:v,style:Object(D.a)(Object(D.a)(Object(D.a)({},b),O),x),span:2*C-1,component:o[1],itemPrefixCls:f,bordered:l,content:p})]}))}var W=function(e){var t=a.useContext(J),n=e.prefixCls,c=e.vertical,r=e.row,l=e.index,o=e.bordered;return c?a.createElement(a.Fragment,null,a.createElement("tr",{key:"label-".concat(l),className:"".concat(n,"-row")},V(r,e,Object(D.a)({component:"th",type:"label",showLabel:!0},t))),a.createElement("tr",{key:"content-".concat(l),className:"".concat(n,"-row")},V(r,e,Object(D.a)({component:"td",type:"content",showContent:!0},t)))):a.createElement("tr",{key:l,className:"".concat(n,"-row")},V(r,e,Object(D.a)({component:o?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},_=function(e){return e.children},z=n(36),J=a.createContext({}),G={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function R(e,t,n){var a=e;return(void 0===t||t>n)&&(a=Object(z.a)(e,{span:n}),Object(F.a)(void 0===t,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),a}function U(e){var t,n=e.prefixCls,c=e.title,r=e.extra,l=e.column,o=void 0===l?G:l,i=e.colon,s=void 0===i||i,u=e.bordered,d=e.layout,b=e.children,m=e.className,p=e.style,j=e.size,f=e.labelStyle,v=e.contentStyle,O=a.useContext(A.b),h=O.getPrefixCls,x=O.direction,y=h("descriptions",n),C=a.useState({}),g=Object(S.a)(C,2),w=g[0],N=g[1],F=function(e,t){if("number"===typeof e)return e;if("object"===Object(k.a)(e))for(var n=0;n<I.b.length;n++){var a=I.b[n];if(t[a]&&void 0!==e[a])return e[a]||G[a]}return 3}(o,w);a.useEffect((function(){var e=I.a.subscribe((function(e){"object"===Object(k.a)(o)&&N(e)}));return function(){I.a.unsubscribe(e)}}),[]);var D=function(e,t){var n=Object(P.a)(e).filter((function(e){return e})),a=[],c=[],r=t;return n.forEach((function(e,l){var o,i=null===(o=e.props)||void 0===o?void 0:o.span,s=i||1;if(l===n.length-1)return c.push(R(e,i,r)),void a.push(c);s<r?(r-=s,c.push(e)):(c.push(R(e,s,r)),a.push(c),r=t,c=[])})),a}(b,F);return a.createElement(J.Provider,{value:{labelStyle:f,contentStyle:v}},a.createElement("div",{className:T()(y,(t={},Object(E.a)(t,"".concat(y,"-").concat(j),j&&"default"!==j),Object(E.a)(t,"".concat(y,"-bordered"),!!u),Object(E.a)(t,"".concat(y,"-rtl"),"rtl"===x),t),m),style:p},(c||r)&&a.createElement("div",{className:"".concat(y,"-header")},c&&a.createElement("div",{className:"".concat(y,"-title")},c),r&&a.createElement("div",{className:"".concat(y,"-extra")},r)),a.createElement("div",{className:"".concat(y,"-view")},a.createElement("table",null,a.createElement("tbody",null,D.map((function(e,t){return a.createElement(W,{key:t,index:t,colon:s,prefixCls:y,vertical:"vertical"===d,bordered:u,row:e})})))))))}U.Item=_;var $=U,B=n(933),H=n(457),K=n(653),M=n(122),Q=n.n(M);function X(e){var t=e.download,n=c.a.useState(null),a=Object(h.a)(n,2),r=a[0],l=a[1],i=c.a.useState(!1),s=Object(h.a)(i,2),u=s[0],d=s[1],b=c.a.useState(!1),p=Object(h.a)(b,2),f=p[0],E=p[1],S=c.a.useState(!1),k=Object(h.a)(S,2),N=k[0],T=k[1],P=c.a.useState([]),I=Object(h.a)(P,2),F=I[0],A=I[1],D=function(){var t=Object(O.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T(!0),t.next=3,Q.a.post("/api/v1/template/read/".concat(e.name,"/").concat(e.version));case 3:if(200===(n=t.sent).status){t.next=8;break}return x.b.error(n.statusText),T(!1),t.abrupt("return");case 8:l(n.data),T(!1),d(!0);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(e,t){F.find((function(t){return t.name===e})).value=t,A(F)},q={name:"file",action:"/api/v1/template/read",onChange:function(e){"done"===e.file.status?(d(!0),l(e.file.response),A(e.file.response.variables)):"error"===e.file.status&&x.b.error("".concat(e.file.name," file upload failed."))}},V=function(){E(!1),l(null),d(!1)},W=function(){E(!0),Q.a.post("/api/v1/template/import",F).then((function(e){x.b.success("Template applied successfully!"),E(!1),l(null),d(!1)})).catch((function(){x.b.error("Template failed to apply!"),E(!1),l(null),d(!1)}))};return Object(m.jsxs)(c.a.Fragment,{children:[!t&&Object(m.jsx)(g.a,Object(j.a)(Object(j.a)({},q),{},{children:Object(m.jsx)(o.a,{icon:Object(m.jsx)(K.a,{}),children:"Import Template"})})),t&&Object(m.jsx)(o.a,{icon:Object(m.jsx)(K.a,{}),loading:N,onClick:D,children:"Import Template"}),Object(m.jsxs)(w.a,{visible:u,onOk:W,onCancel:V,footer:[Object(m.jsx)(o.a,{type:"default",onClick:V,children:"Cancel"}),Object(m.jsx)(o.a,{type:"primary",loading:f,onClick:W,children:"Apply"},"submit")],children:[Object(m.jsxs)($,{title:null===r||void 0===r?void 0:r.name,children:[Object(m.jsx)($.Item,{label:"Version",children:null===r||void 0===r?void 0:r.version}),Object(m.jsx)($.Item,{label:"Author",children:null===r||void 0===r?void 0:r.author})]}),Object(m.jsx)(C.a.Text,{type:"secondary",children:null===r||void 0===r?void 0:r.description}),(null===r||void 0===r?void 0:r.variables.length)>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(B.a,{}),Object(m.jsx)(C.a.Title,{level:4,children:"Variables"}),Object(m.jsx)(C.a.Text,{type:"secondary",children:"Customize variables for this template."}),Object(m.jsx)("p",{}),Object(m.jsx)(H.b,{direction:"vertical",children:null===r||void 0===r?void 0:r.variables.map((function(e){var t=null;return e.vault&&""!==e.vault?"String"===e.type?t=Object(m.jsx)(y.default.Password,{placeholder:e.name,onChange:function(t){return L(e.name,t.target.value)}}):"PSCredential"===e.type&&(t=Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(y.default,{placeholder:"User Name",onChange:function(t){return n=e.name,a=t.target.value,F.find((function(e){return e.name===n})).userName=a,void A(F);var n,a}}),Object(m.jsx)(y.default.Password,{placeholder:"Password",onChange:function(t){return n=e.name,a=t.target.value,F.find((function(e){return e.name===n})).password=a,void A(F);var n,a}})]})):t=Object(m.jsx)(y.default,{placeholder:e.name,onChange:function(t){return L(e.name,t.target.value)}}),Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsxs)(C.a,{children:["$",e.name]}),Object(m.jsx)(C.a.Text,{type:"secondary",children:e.description}),t]})}))})]})]})]})}var Y=[{title:"Name",dataIndex:"name",key:"name",editable:!1},{title:"Description",dataIndex:"description",key:"description",editable:!1},{title:"Version",dataIndex:"version",key:"version",editable:!1},{width:"fit-content",dataIndex:"actions",editable:!1,render:function(e,t){return Object(m.jsx)(X,{name:t.name,version:t.version,download:!0})}}];function Z(){var e=Object(r.a)("/template",{enabled:!1,refetchOnWindowFocus:!1}),t=e.data,n=e.isLoading,a=e.refetch;return Object(m.jsx)(l.a,{title:"Templates",subTitle:"Community contributed templates that contain pre-built configurations.",extra:[Object(m.jsx)(o.a,{icon:Object(m.jsx)(u.a,{}),href:"https://docs.powershelluniversal.com/platform/templates",target:"_blank",children:"Documentation"})],children:Object(m.jsx)(s.default,{title:"Templates",actions:[Object(m.jsx)(i.a,{children:Object(m.jsx)(p,{})}),Object(m.jsx)(X,{})],columns:Y,data:t,loading:n,queryFn:a})})}}}]);
//# sourceMappingURL=97.1b16fe7b.chunk.js.map