{"version":3,"sources":["components/ui/TagLink.tsx","components/scripts/components/ScriptJobs.tsx"],"names":["TagLink","text","to","color","style","ScriptJobs","script","usePageContext","resource","useQuery","fullPath","enabled","jobs","data","isLoading","columns","title","key","dataIndex","align","defaultSortOrder","responsive","render","record","setStatusTag","status","generateJobDescription","job","page","reverse","loading","pagination","hideOnSinglePage","showSizeChanger","total","length"],"mappings":"kKAAA,gFAIe,SAASA,EAAT,GAAgC,IAAbC,EAAY,EAAZA,KAAMC,EAAM,EAANA,GACtC,OACE,cAAC,IAAD,CAAKC,MAAM,OAAX,SACE,cAAC,IAAD,CAAMC,MAAO,CAAED,MAAO,WAAaD,GAAIA,EAAvC,SACGD,Q,kCCRT,sHAYe,SAASI,IAAc,IAAD,IACjBC,EAAWC,cAArBC,SAD2B,EAGDC,YAAQ,6BACzBH,QADyB,IACzBA,OADyB,EACzBA,EAAQI,UAAY,CAAEC,UAAWL,IADpCM,EAHqB,EAG3BC,KAAYC,EAHe,EAGfA,UAIdC,EAAgC,CACpC,CACEC,MAAO,KACPC,IAAK,KACLC,UAAW,KACXC,MAAO,OACPC,iBAAkB,UAClBC,WAAY,CAAC,MACbC,OAAQ,SAACrB,EAAMsB,GAAP,OAAkB,cAAC,UAAD,CAAStB,KAAMA,EAAMC,GAAE,iCAA4BD,OAE/E,CACEe,MAAO,SACPC,IAAK,SACLC,UAAW,SACXC,MAAO,SACPE,WAAY,CAAC,MACbC,OAAQ,SAACrB,EAAMsB,GAAP,OAAkBC,YAAY,OAACD,QAAD,IAACA,OAAD,EAACA,EAAQE,UAEjD,CACET,MAAO,cACPC,IAAK,WACLE,MAAO,QACPE,WAAY,CAAC,MACbC,OAAQ,SAACrB,EAAMsB,GAAP,OAAuBG,YAAuBH,KAExD,CACEP,MAAO,WACPC,IAAK,WACLE,MAAO,QACPE,WAAY,CAAC,MACbC,OAAQ,SAACrB,EAAMsB,GAAP,OAAuB,cAAC,IAAD,CAAaI,IAAKJ,OAIrD,OACE,cAAC,UAAD,CACEV,KAAI,OAAED,QAAF,IAAEA,GAAF,UAAEA,EAAMgB,YAAR,aAAE,EAAYC,UAClBd,QAASA,EACTe,QAAShB,EACTiB,WAAY,CACVC,kBAAkB,EAClBC,iBAAiB,EACjBC,MAAK,OAAEtB,QAAF,IAAEA,GAAF,UAAEA,EAAMgB,YAAR,aAAE,EAAYO","file":"static/js/50.5513aa89.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Tag } from \"antd\";\r\n\r\nexport default function TagLink({ text, to }) {\r\n  return (\r\n    <Tag color=\"blue\">\r\n      <Link style={{ color: \"inherit\" }} to={to}>\r\n        {text}\r\n      </Link>\r\n    </Tag>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CustomColumns, Job, JobQuery } from \"../../../types\";\r\nimport { generateJobDescription, setStatusTag } from \"components/utils/utils\";\r\nimport { usePageContext } from \"components/pages/Page\";\r\nimport { useQuery } from \"react-query3\";\r\nimport { Breakpoint } from \"antd/lib/_util/responsiveObserve\";\r\nimport { AlignType } from \"rc-table/lib/interface\";\r\n\r\nimport Table from \"components/ui/Table\";\r\nimport JobDateTime from \"components/jobs/JobDateTime\";\r\nimport TagLink from \"components/ui/TagLink\";\r\n\r\nexport default function ScriptJobs() {\r\n  const { resource: script } = usePageContext();\r\n\r\n  const { data: jobs, isLoading } = useQuery<JobQuery>(\r\n    `/script/job/${script?.fullPath}`, { enabled: !!script }\r\n  );\r\n\r\n  const columns: CustomColumns<Job>[] = [\r\n    {\r\n      title: \"Id\",\r\n      key: \"id\",\r\n      dataIndex: \"id\",\r\n      align: \"left\" as AlignType,\r\n      defaultSortOrder: 'descend',\r\n      responsive: [\"md\" as Breakpoint],\r\n      render: (text, record) => <TagLink text={text} to={`/admin/automation/jobs/${text}`} />\r\n    },\r\n    {\r\n      title: \"Status\",\r\n      key: \"status\",\r\n      dataIndex: \"status\",\r\n      align: \"center\" as AlignType,\r\n      responsive: [\"md\" as Breakpoint],\r\n      render: (text, record) => setStatusTag(record?.status),\r\n    },\r\n    {\r\n      title: \"Description\",\r\n      key: \"datetime\",\r\n      align: \"right\" as AlignType,\r\n      responsive: [\"md\" as Breakpoint],\r\n      render: (text, record: Job) => generateJobDescription(record),\r\n    },\r\n    {\r\n      title: \"datetime\",\r\n      key: \"datetime\",\r\n      align: \"right\" as AlignType,\r\n      responsive: [\"md\" as Breakpoint],\r\n      render: (text, record: Job) => <JobDateTime job={record} />,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Table\r\n      data={jobs?.page?.reverse()}\r\n      columns={columns}\r\n      loading={isLoading}\r\n      pagination={{\r\n        hideOnSinglePage: true,\r\n        showSizeChanger: false,\r\n        total: jobs?.page?.length,\r\n      }}\r\n    />\r\n  );\r\n}\r\n"],"sourceRoot":""}