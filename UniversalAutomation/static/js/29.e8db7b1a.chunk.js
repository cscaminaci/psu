(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[29,108],{1019:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return c}));var r=t(12),o=(t(0),t(948)),i=t(941),u=t(43),a=t(4);function c(e){var n=Object(u.h)();return Object(a.jsx)(o.a,{bordered:!1,bodyStyle:{padding:0},children:Object(a.jsx)(i.a,Object(r.a)(Object(r.a)({},e),{},{ghost:!0,onBack:function(){return n(-1)}}))})}},1334:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return s}));t(695),t(0);var r=t(43),o=t(995),i=t(461),u=t(138),a=t(22),c=t(423),l=t(1019),d=t(4);function s(){var e=Object(r.i)().id,n=Object(c.a)("/module/".concat(e),{enabled:!!e,initialData:function(){return a.a.getQueryData("/module/".concat(e))}}).data;return Object(d.jsxs)(i.c,{resource:n,children:[Object(d.jsx)(i.f,{children:Object(d.jsx)(l.default,{title:null===n||void 0===n?void 0:n.name,subTitle:null===n||void 0===n?void 0:n.version})}),Object(d.jsx)(i.e,{children:Object(d.jsx)(u.a,{span:24,children:Object(d.jsx)(o.b,{children:Object(d.jsx)(o.c,{title:"Code Editor"})})})})]})}},995:function(e,n,t){"use strict";t.d(n,"b",(function(){return F})),t.d(n,"a",(function(){return P})),t.d(n,"c",(function(){return K}));var r=t(76),o=t(12),i=t(25),u=t(49),a=t.n(u),c=t(86),l=t(0),d=t.n(l),s=t(455),v=t(95),g=t(288),f=t(948),b=t(74),p=t(68),h=t(22),m=t(448),j=t(366),O=t(367),x=t(110),k=t(443),y=t(98),C=t(1041),w=t(132),I={base:"vs-dark",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#060606","activityBar.foreground":"#A9A9A9","editor.background":"#060606","editor.foreground":"#ffffff4d","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#141414","editor.selectionBackground":"#141414"}},A={base:"vs",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#E1ECF9","activityBar.foreground":"#A9A9A9","editor.background":"#ffffff","editor.foreground":"#000000","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#c2c2c2","editor.selectionBackground":"#e1ecf8"}},B=t(115),M=t(56),S=t(1040),E=t(461),L=t(231),T=t(122),V=t.n(T),D=t(4);C.b.config({paths:{vs:"/admin/vs"}}),C.b.init().then((function(e){e.languages.registerDocumentFormattingEditProvider("powershell",{displayName:"PowerShell",provideDocumentFormattingEdits:function(){var e=Object(c.a)(a.a.mark((function e(n,t,r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.post("/api/v1/editor/format",n.getValue(),{headers:{"content-type":"text/plain"}});case 2:return o=e.sent,i=o.data,e.abrupt("return",[{text:i,range:{startColumn:1,startLineNumber:1,endLineNumber:n.getLineCount(),endColumn:n.getLineMaxColumn(n.getLineCount())}}]);case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()});var n=["$","-","\\","/",":","."];e.languages.registerCompletionItemProvider("powershell",{triggerCharacters:n,provideCompletionItems:function(){var t=Object(c.a)(a.a.mark((function t(r,o,i){var u,c,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1===n.findIndex((function(e){return e===i.triggerCharacter}))){t.next=7;break}return t.next=3,V.a.post("/api/v1/editor/complete",{content:r.getValue(),cursorPosition:r.getOffsetAt(o)});case 3:return u=t.sent,c=u.data,l=null===c||void 0===c?void 0:c.map((function(n){return{insertText:n.text,label:n.text,documentation:n.help,kind:e.languages.CompletionItemKind.Property}})),t.abrupt("return",{incomplete:!1,suggestions:l});case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()})}));var R=d.a.createContext(null);function F(e){var n=e.children,t=e.refetch,r=void 0===t?function(){}:t,o=d.a.useState(!1),u=Object(i.a)(o,2),l=u[0],v=u[1],g=d.a.useState(!1),f=Object(i.a)(g,2),b=f[0],p=f[1],m=Object(h.b)().mutateAsync,j=Object(w.b)().currentTheme,O=Object(B.a)().userData,x=Object(C.c)(),k=Object(L.a)({onSuccess:function(e){return s.b.success("Copied.")}}).copy,y=d.a.useRef(null),M=d.a.useCallback(function(){var e=Object(c.a)(a.a.mark((function e(n,t,o){var i,u,c,l,d,g,f,b,j,O,x,k,C,w,I,A,B;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),v(!0),"/script"===n&&(o.content=null===y||void 0===y||null===(c=y.current)||void 0===c?void 0:c.getValue()),"/endpoint"===n&&(n=null===(l=o)||void 0===l||null===(d=l.resourceInfo)||void 0===d?void 0:d.self,o.scriptBlock=null===y||void 0===y||null===(g=y.current)||void 0===g?void 0:g.getValue()),"/dashboard"===n&&(n=null===(f=o)||void 0===f||null===(b=f.resourceInfo)||void 0===b?void 0:b.self,o.content=null===y||void 0===y||null===(j=y.current)||void 0===j?void 0:j.getValue()),n.startsWith("/role")&&(n=null===(O=o)||void 0===O||null===(x=O.resourceInfo)||void 0===x?void 0:x.self,o.policy=null===y||void 0===y||null===(k=y.current)||void 0===k?void 0:k.getValue()),"/settings"===n&&(n="/settings/authentication/1",o.settings=null===y||void 0===y||null===(C=y.current)||void 0===C?void 0:C.getValue()),n.startsWith("/module")&&(n=null===(w=o)||void 0===w||null===(I=w.resourceInfo)||void 0===I?void 0:I.self,o.content=null===y||void 0===y||null===(A=y.current)||void 0===A?void 0:A.getValue()),"configuration"===(null===(i=o)||void 0===i||null===(u=i.resourceInfo)||void 0===u?void 0:u.schemaName)&&(o=null===y||void 0===y||null===(B=y.current)||void 0===B?void 0:B.getValue({preserveBOM:!0,lineEnding:"\r\n"})),e.next=11,m({key:n,action:t,resource:o},{onError:function(e){p(!1),v(!1),s.b.error(e.message)},onSuccess:function(e,t){p(!1),v(!1),s.b.success("Changes saved!"),h.a.refetchQueries(n),r()}});case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[m,r]),E=d.a.useCallback((function(e,n,t){y.current=e,n.languages.register({id:"psulog"}),n.languages.setMonarchTokensProvider("psulog",{tokenizer:{root:[[/\[error.*/,"custom-error"],[/\[verbose.*/,"custom-verbose"],[/\[warning.*/,"custom-warning"],[/\[debug.*/,"custom-debug"],[/\[information.*/,"custom-info"]]}});var o=e.getModel();o.onDidChangeContent((function(){var e=o.getVersionId();!function(e,n){var t;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,o)}),n)}}(Object(c.a)(a.a.mark((function t(){var r,i,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.getVersionId(),e===r){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,V.a.post("/api/v1/editor/parse",o.getValue(),{headers:{"content-type":"text/plain"}});case 5:i=t.sent,u=i.data,c=u.map((function(e){return{startColumn:e.token.startColumn,endColumn:e.token.endColumn,startLineNumber:e.token.startLine,endLineNumber:e.token.endLine,severity:S.a.Error,message:e.message}})),n.editor.setModelMarkers(o,"powershell",c);case 9:case"end":return t.stop()}}),t)}))),300)()})),t&&e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KEY_S,(function(){var e;return M(null===t||void 0===t||null===(e=t.resourceInfo)||void 0===e?void 0:e.parent,"update",t)})),e.addAction({id:"refresh",label:"Refresh",keybindings:[n.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return r(),null}}),e.addAction({id:"format",label:"Format",keybindings:[n.KeyCode.F8],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){return e.trigger("anyString","editor.action.formatDocument",null),null}})}),[r,M]);d.a.useEffect((function(){x&&(x.editor.defineTheme("psu-dark",I),x.editor.defineTheme("psu-light",A),x.editor.setTheme("dark"===j?"psu-dark":"psu-light"))}),[j,x]);var T=d.a.useCallback((function(){var e;return k(null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.getValue())}),[k]),F=function(){var e;return null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomIn",{})},N=function(){var e;return null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomOut",{})},P=d.a.useMemo((function(){return{isReadOnly:l,setIsReadOnly:v,onSave:M,monaco:x,editor:null===y||void 0===y?void 0:y.current,userData:O,handleEditorDidMount:E,currentTheme:j,onCopy:T,zoomIn:F,zoomOut:N,isSaving:b}}),[j,E,l,x,T,M,O,b]);return Object(D.jsx)(R.Provider,{value:P,children:n})}function N(e){var n,t,r,o=e.children,i=e.resource;return Object(D.jsx)(y.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:M.a.Edit,accessControls:null===i||void 0===i?void 0:i.accessControls,allowedWithOneWayGitSync:!1,children:Object(D.jsx)(v.a,{title:"Save",children:d.a.cloneElement(o,{type:(null===o||void 0===o||null===(n=o.props)||void 0===n?void 0:n.type)||"text",icon:(null===o||void 0===o||null===(t=o.props)||void 0===t?void 0:t.icon)||Object(D.jsx)(m.a,{}),onClick:Object(p.a)(null===o||void 0===o||null===(r=o.props)||void 0===r?void 0:r.onClick)})})})}function P(e){var n=Object.assign({},e),t=d.a.useContext(R),r=t.currentTheme,i=t.handleEditorDidMount;return Object(D.jsx)(C.a,Object(o.a)({theme:"dark"===r?"psu-dark":"psu-light",language:"powershell",loading:Object(D.jsx)(g.a,{tip:"Loading content..."}),height:"calc((100vh - 256px) - 48px)",onMount:function(e,n){return i(e,n,null)}},n))}function K(e){var n=e.title,t=e.options,i=e.showSave,u=void 0===i||i,a=e.actions,c=e.hideToolbar,s=Object(r.a)(e,["title","options","showSave","actions","hideToolbar"]),h=d.a.useContext(R),m=h.handleEditorDidMount,y=h.currentTheme,C=h.onSave,w=h.onCopy,I=h.zoomIn,A=h.zoomOut,B=h.isSaving,M=Object(E.j)().resource;return Object(D.jsx)(f.a,{bordered:!1,bodyStyle:{padding:0},title:n,extra:!c&&Object(D.jsxs)(l.Fragment,{children:[a,Object(D.jsx)(v.a,{title:"Zoom in",children:Object(D.jsx)(b.a,{type:"text",icon:Object(D.jsx)(j.a,{}),onClick:function(){return I()}})}),Object(D.jsx)(v.a,{title:"Zoom out",children:Object(D.jsx)(b.a,{type:"text",icon:Object(D.jsx)(O.a,{}),onClick:function(){return A()}})}),u&&Object(D.jsx)(N,{resource:M,children:Object(D.jsx)(b.a,{icon:B?Object(D.jsx)(x.a,{}):null,onClick:Object(p.a)((function(){var e;return C(null===M||void 0===M||null===(e=M.resourceInfo)||void 0===e?void 0:e.parent,"update",M)}))})}),Object(D.jsx)(v.a,{title:"Copy",children:Object(D.jsx)(b.a,{type:"text",icon:Object(D.jsx)(k.a,{}),onClick:function(){return w()}})}),Object(D.jsx)(E.b,{children:Object(D.jsx)(b.a,{})})]}),children:Object(D.jsx)(P,Object(o.a)(Object(o.a)({language:"powershell",height:"calc((100vh - 256px) - 48px)",value:(null===M||void 0===M?void 0:M.content)||(null===M||void 0===M?void 0:M.scriptBlock)||(null===M||void 0===M?void 0:M.settings)||(null===s||void 0===s?void 0:s.value),onMount:function(e,n){return m(e,n,M)},theme:"dark"===y?"psu-dark":"psu-light",loading:(null===s||void 0===s?void 0:s.loading)||Object(D.jsx)(g.a,{tip:"Loading content..."})},s),{},{options:Object(o.a)({wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1},t)}))})}}}]);
//# sourceMappingURL=29.e8db7b1a.chunk.js.map