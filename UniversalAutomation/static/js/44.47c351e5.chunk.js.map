{"version":3,"sources":["components/dashboard/components/Sessions.tsx","components/pages/notLicensed.tsx"],"names":["renderColumn","value","copyable","Text","style","fontFamily","fontSize","DashboardSessions","id","useParams","licensed","useAppStore","sessions","useQuery","enabled","Feature","Dashboard","select","data","columns","title","key","dataIndex","render","text","formatDate","endpoints","length","rowKey","record","expandable","expandedRowRender","size","dataSource","renderItem","item","Item","padding","paddingLeft","paddingRight","Meta","margin","averageExecutionTime","NotLicensed","status","extra","icon","onClick","window","location","href"],"mappings":"gKAAA,yGAuFA,SAASA,EAAgBC,EAAgBC,GACvC,OACE,cAAC,IAAWC,KAAZ,CACEC,MAAO,CACLC,WAAY,uBACZC,SAAU,IAEZJ,SAAUA,EALZ,SAOGD,IAXQM,UA3EW,WAAO,IACvBC,EAAOC,cAAPD,GACAE,EAAaC,cAAbD,SACME,EAAaC,YAAQ,qBAAoBL,EAApB,gBAAsC,CACvEM,UAAWN,GAAME,EAASK,IAAQC,WAClCC,OAAQ,SAACC,GACP,cAAOA,QAAP,IAAOA,OAAP,EAAOA,EAAMN,YAHTM,KAOFC,EAA6C,CACjD,CACEC,MAAO,KACPC,IAAK,KACLC,UAAW,MAEb,CACEF,MAAO,YACPC,IAAK,WACLC,UAAW,YAEb,CACEF,MAAO,cACPC,IAAK,cACLC,UAAW,cACXC,OAAQ,SAACC,GACP,OAAOC,YAAWD,KAGtB,CACEJ,MAAO,YACPC,IAAK,YACLC,UAAW,YACXC,OAAQ,SAACC,EAAMN,GACb,OAAOA,EAAOA,EAAKQ,UAAUC,OAAS,KAK5C,OAAKjB,EAASK,IAAQC,WAOpB,cAAC,UAAD,CACEY,OAAQ,SAACC,GAAD,OAA8BA,EAAOrB,IAC7CU,KAAMN,EACNO,QAASA,EACTW,WAAY,CACVC,kBAAmB,SAACF,GAClB,OACE,cAAC,IAAD,CACEG,KAAK,UACLC,WAAYJ,EAAOH,UACnBQ,WAAY,SAACC,GACX,OACE,eAAC,IAAKC,KAAN,CAAWhC,MAAO,CAAEiC,QAAS,GAAIC,YAAa,GAAIC,aAAc,GAAhE,UACE,cAAC,IAAKH,KAAKI,KAAX,CAAgBpB,MAAOpB,EAAamC,EAAK3B,IAAI,KAC7C,eAAC,IAAD,CAAOJ,MAAO,CAAEiC,QAAS,EAAGI,OAAQ,GAApC,UACGzC,EAAa,2BACbA,EAAa,GAAD,OAAImC,EAAKO,oCArBtC,cAAC,UAAD,CAAatB,MAAM,0D,iCCnDzB,yFAIe,SAASuB,EAAT,GAAiC,IAAVvB,EAAS,EAATA,MACpC,OACE,cAAC,IAAD,CACEA,MAAOA,EACPwB,OAAO,UACPC,MACE,cAAC,IAAD,CACEC,KAAM,cAAC,IAAD,IACNC,QAAS,WACPC,OAAOC,SAASC,KACd,gEAJN","file":"static/js/44.47c351e5.chunk.js","sourcesContent":["import Table from \"../../ui/Table\";\r\nimport useAppStore from \"components/context/app/Hooks\";\r\nimport { DashboardDiagnostics, Feature } from \"types\";\r\nimport NotLicensed from \"components/pages/notLicensed\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query3\";\r\nimport { CustomColumns, DashboardSession } from \"../../../types\";\r\nimport { formatDate } from \"components/utils/utils\";\r\nimport {List, Space, Typography} from \"antd\"\r\n\r\nconst DashboardSessions = () => {\r\n  const { id } = useParams();\r\n  const { licensed } = useAppStore();\r\n  const { data: sessions } = useQuery<any>(`/dashboard/${id}/diagnostics`, {\r\n    enabled: !!id && licensed(Feature.Dashboard),\r\n    select: (data: DashboardDiagnostics) => {\r\n      return data?.sessions;\r\n    },\r\n  });\r\n\r\n  const columns: CustomColumns<DashboardSession>[] = [\r\n    {\r\n      title: \"Id\",\r\n      key: \"id\",\r\n      dataIndex: \"id\",\r\n    },\r\n    {\r\n      title: \"User Name\",\r\n      key: \"userName\",\r\n      dataIndex: \"userName\",\r\n    },\r\n    {\r\n      title: \"Last Active\",\r\n      key: \"lastTouched\",\r\n      dataIndex: \"lastTouched\",\r\n      render: (text) => {\r\n        return formatDate(text);\r\n      },\r\n    },\r\n    {\r\n      title: \"Endpoints\",\r\n      key: \"endpoints\",\r\n      dataIndex: \"endpoints\",\r\n      render: (text, data) => {\r\n        return data ? data.endpoints.length : 0;\r\n      },\r\n    },\r\n  ];\r\n\r\n  if (!licensed(Feature.Dashboard)) {\r\n    return (\r\n      <NotLicensed title=\"Sessions are only available for licensed instances.\" />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Table\r\n      rowKey={(record: DashboardSession) => record.id}\r\n      data={sessions}\r\n      columns={columns}\r\n      expandable={{\r\n        expandedRowRender: (record: DashboardSession) => {\r\n          return (\r\n            <List\r\n              size=\"default\"\r\n              dataSource={record.endpoints}\r\n              renderItem={(item) => {\r\n                return (\r\n                  <List.Item style={{ padding: 12, paddingLeft: 48, paddingRight: 0 }}>\r\n                    <List.Item.Meta title={renderColumn(item.id, true)} />\r\n                    <Space style={{ padding: 0, margin: 0}}>\r\n                      {renderColumn(`Average Execution Time:`)}\r\n                      {renderColumn(`${item.averageExecutionTime}`)}\r\n                    </Space>\r\n                  </List.Item>\r\n                );\r\n              }}\r\n            />\r\n          );\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default DashboardSessions;\r\n\r\nfunction renderColumn<T>(value: keyof T, copyable?: boolean) {\r\n  return (\r\n    <Typography.Text\r\n      style={{\r\n        fontFamily: \"SFProDisplay-Regular\",\r\n        fontSize: 14,\r\n      }}\r\n      copyable={copyable}\r\n    >\r\n      {value}\r\n    </Typography.Text>\r\n  );\r\n}","import React from \"react\";\r\nimport { Result, Button } from \"antd\";\r\nimport { CreditCardOutlined } from \"@ant-design/icons\";\r\n\r\nexport default function NotLicensed({ title }) {\r\n  return (\r\n    <Result\r\n      title={title}\r\n      status=\"warning\"\r\n      extra={\r\n        <Button\r\n          icon={<CreditCardOutlined />}\r\n          onClick={() => {\r\n            window.location.href =\r\n              \"https://ironmansoftware.com/powershell-universal?rel=product\";\r\n          }}\r\n        >\r\n          Buy License\r\n        </Button>\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"sourceRoot":""}