(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[28,119],{1192:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return a}));t(0);var r=t(926),o=t(45),i=t(4);function a(e){var n=e.isVisible,t=e.setIsVisible;return Object(i.jsx)(r.default,{size:"small",style:{backgroundColor:n?o.presetPrimaryColors.blue:o.presetPrimaryColors.red},checkedChildren:"Show Time",unCheckedChildren:"Hide Time",checked:n,onChange:t})}},1493:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return v}));var r=t(12),o=(t(0),t(68)),i=t(56),a=t(423),u=t(995),l=t(689),c=t(1192),d=t(4),s={readOnly:!0,wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,scrollbar:{horizontal:"hidden",vertical:"hidden",useShadows:!1},hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1};function v(e){var n=e.showTimestamp,t=e.setShowTimestamp,v=e.refetchInterval,g=e.job,p=e.hideToolbar,f=Object(a.a)("/job/".concat(null===g||void 0===g?void 0:g.id,"/log"),{refetchOnWindowFocus:!1,keepPreviousData:!0,refetchInterval:v}),b=f.data,h=f.isLoading,m=f.refetch;function j(){if(h)return null;try{var e;return null===(e=JSON.parse(b.log))||void 0===e?void 0:e.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{JobId:null===b||void 0===b?void 0:b.id})}))}catch(n){}}var O=j(),k="";return k=(null===g||void 0===g?void 0:g.status)!==i.g.Completed&&(null===g||void 0===g?void 0:g.status)!==i.g.Failed||null!=O||h?n?Object(o.k)(j()):Object(o.l)(j()):"# This job produced no output",Object(d.jsx)(u.b,{refetch:m,children:Object(d.jsx)(u.c,{title:"Output",language:"psulog",hideToolbar:p,showSave:!1,actions:Object(d.jsx)(c.default,{isVisible:n,setIsVisible:function(){return t()}}),loading:Object(d.jsx)(l.a,{active:!0,loading:h,paragraph:{rows:5,width:[60,60,40,80,120]}}),options:Object(r.a)({},s),value:k})})}},995:function(e,n,t){"use strict";t.d(n,"b",(function(){return P})),t.d(n,"a",(function(){return N})),t.d(n,"c",(function(){return z}));var r=t(76),o=t(12),i=t(25),a=t(49),u=t.n(a),l=t(86),c=t(0),d=t.n(c),s=t(455),v=t(95),g=t(288),p=t(948),f=t(74),b=t(68),h=t(22),m=t(448),j=t(366),O=t(367),k=t(110),x=t(443),C=t(98),y=t(1041),w=t(132),I={base:"vs-dark",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#060606","activityBar.foreground":"#A9A9A9","editor.background":"#060606","editor.foreground":"#ffffff4d","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#141414","editor.selectionBackground":"#141414"}},S={base:"vs",inherit:!0,rules:[{token:"custom-error",foreground:"d32029"},{token:"custom-verbose",foreground:"177ddc"},{token:"custom-warning",foreground:"d89614"},{token:"custom-debug",foreground:"13a8a8"}],colors:{"activityBar.background":"#E1ECF9","activityBar.foreground":"#A9A9A9","editor.background":"#ffffff","editor.foreground":"#000000","activityBarBadge.background":"#A9A9A9","editor.lineHighlightBackground":"#c2c2c2","editor.selectionBackground":"#e1ecf8"}},T=t(115),A=t(56),B=t(1040),M=t(461),L=t(231),V=t(122),E=t.n(V),R=t(4);y.b.config({paths:{vs:"/admin/vs"}}),y.b.init().then((function(e){e.languages.registerDocumentFormattingEditProvider("powershell",{displayName:"PowerShell",provideDocumentFormattingEdits:function(){var e=Object(l.a)(u.a.mark((function e(n,t,r){var o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/v1/editor/format",n.getValue(),{headers:{"content-type":"text/plain"}});case 2:return o=e.sent,i=o.data,e.abrupt("return",[{text:i,range:{startColumn:1,startLineNumber:1,endLineNumber:n.getLineCount(),endColumn:n.getLineMaxColumn(n.getLineCount())}}]);case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()});var n=["$","-","\\","/",":","."];e.languages.registerCompletionItemProvider("powershell",{triggerCharacters:n,provideCompletionItems:function(){var t=Object(l.a)(u.a.mark((function t(r,o,i){var a,l,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1===n.findIndex((function(e){return e===i.triggerCharacter}))){t.next=7;break}return t.next=3,E.a.post("/api/v1/editor/complete",{content:r.getValue(),cursorPosition:r.getOffsetAt(o)});case 3:return a=t.sent,l=a.data,c=null===l||void 0===l?void 0:l.map((function(n){return{insertText:n.text,label:n.text,documentation:n.help,kind:e.languages.CompletionItemKind.Property}})),t.abrupt("return",{incomplete:!1,suggestions:c});case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()})}));var D=d.a.createContext(null);function P(e){var n=e.children,t=e.refetch,r=void 0===t?function(){}:t,o=d.a.useState(!1),a=Object(i.a)(o,2),c=a[0],v=a[1],g=d.a.useState(!1),p=Object(i.a)(g,2),f=p[0],b=p[1],m=Object(h.b)().mutateAsync,j=Object(w.b)().currentTheme,O=Object(T.a)().userData,k=Object(y.c)(),x=Object(L.a)({onSuccess:function(e){return s.b.success("Copied.")}}).copy,C=d.a.useRef(null),A=d.a.useCallback(function(){var e=Object(l.a)(u.a.mark((function e(n,t,o){var i,a,l,c,d,g,p,f,j,O,k,x,y,w,I,S,T;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),v(!0),"/script"===n&&(o.content=null===C||void 0===C||null===(l=C.current)||void 0===l?void 0:l.getValue()),"/endpoint"===n&&(n=null===(c=o)||void 0===c||null===(d=c.resourceInfo)||void 0===d?void 0:d.self,o.scriptBlock=null===C||void 0===C||null===(g=C.current)||void 0===g?void 0:g.getValue()),"/dashboard"===n&&(n=null===(p=o)||void 0===p||null===(f=p.resourceInfo)||void 0===f?void 0:f.self,o.content=null===C||void 0===C||null===(j=C.current)||void 0===j?void 0:j.getValue()),n.startsWith("/role")&&(n=null===(O=o)||void 0===O||null===(k=O.resourceInfo)||void 0===k?void 0:k.self,o.policy=null===C||void 0===C||null===(x=C.current)||void 0===x?void 0:x.getValue()),"/settings"===n&&(n="/settings/authentication/1",o.settings=null===C||void 0===C||null===(y=C.current)||void 0===y?void 0:y.getValue()),n.startsWith("/module")&&(n=null===(w=o)||void 0===w||null===(I=w.resourceInfo)||void 0===I?void 0:I.self,o.content=null===C||void 0===C||null===(S=C.current)||void 0===S?void 0:S.getValue()),"configuration"===(null===(i=o)||void 0===i||null===(a=i.resourceInfo)||void 0===a?void 0:a.schemaName)&&(o=null===C||void 0===C||null===(T=C.current)||void 0===T?void 0:T.getValue({preserveBOM:!0,lineEnding:"\r\n"})),e.next=11,m({key:n,action:t,resource:o},{onError:function(e){b(!1),v(!1),s.b.error(e.message)},onSuccess:function(e,t){b(!1),v(!1),s.b.success("Changes saved!"),h.a.refetchQueries(n),r()}});case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[m,r]),M=d.a.useCallback((function(e,n,t){C.current=e,n.languages.register({id:"psulog"}),n.languages.setMonarchTokensProvider("psulog",{tokenizer:{root:[[/\[error.*/,"custom-error"],[/\[verbose.*/,"custom-verbose"],[/\[warning.*/,"custom-warning"],[/\[debug.*/,"custom-debug"],[/\[information.*/,"custom-info"]]}});var o=e.getModel();o.onDidChangeContent((function(){var e=o.getVersionId();!function(e,n){var t;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,o)}),n)}}(Object(l.a)(u.a.mark((function t(){var r,i,a,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.getVersionId(),e===r){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,E.a.post("/api/v1/editor/parse",o.getValue(),{headers:{"content-type":"text/plain"}});case 5:i=t.sent,a=i.data,l=a.map((function(e){return{startColumn:e.token.startColumn,endColumn:e.token.endColumn,startLineNumber:e.token.startLine,endLineNumber:e.token.endLine,severity:B.a.Error,message:e.message}})),n.editor.setModelMarkers(o,"powershell",l);case 9:case"end":return t.stop()}}),t)}))),300)()})),t&&e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KEY_S,(function(){var e;return A(null===t||void 0===t||null===(e=t.resourceInfo)||void 0===e?void 0:e.parent,"update",t)})),e.addAction({id:"refresh",label:"Refresh",keybindings:[n.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return r(),null}}),e.addAction({id:"format",label:"Format",keybindings:[n.KeyCode.F8],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){return e.trigger("anyString","editor.action.formatDocument",null),null}})}),[r,A]);d.a.useEffect((function(){k&&(k.editor.defineTheme("psu-dark",I),k.editor.defineTheme("psu-light",S),k.editor.setTheme("dark"===j?"psu-dark":"psu-light"))}),[j,k]);var V=d.a.useCallback((function(){var e;return x(null===C||void 0===C||null===(e=C.current)||void 0===e?void 0:e.getValue())}),[x]),P=function(){var e;return null===C||void 0===C||null===(e=C.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomIn",{})},F=function(){var e;return null===C||void 0===C||null===(e=C.current)||void 0===e?void 0:e.trigger("keyboard","editor.action.fontZoomOut",{})},N=d.a.useMemo((function(){return{isReadOnly:c,setIsReadOnly:v,onSave:A,monaco:k,editor:null===C||void 0===C?void 0:C.current,userData:O,handleEditorDidMount:M,currentTheme:j,onCopy:V,zoomIn:P,zoomOut:F,isSaving:f}}),[j,M,c,k,V,A,O,f]);return Object(R.jsx)(D.Provider,{value:N,children:n})}function F(e){var n,t,r,o=e.children,i=e.resource;return Object(R.jsx)(C.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:A.a.Edit,accessControls:null===i||void 0===i?void 0:i.accessControls,allowedWithOneWayGitSync:!1,children:Object(R.jsx)(v.a,{title:"Save",children:d.a.cloneElement(o,{type:(null===o||void 0===o||null===(n=o.props)||void 0===n?void 0:n.type)||"text",icon:(null===o||void 0===o||null===(t=o.props)||void 0===t?void 0:t.icon)||Object(R.jsx)(m.a,{}),onClick:Object(b.a)(null===o||void 0===o||null===(r=o.props)||void 0===r?void 0:r.onClick)})})})}function N(e){var n=Object.assign({},e),t=d.a.useContext(D),r=t.currentTheme,i=t.handleEditorDidMount;return Object(R.jsx)(y.a,Object(o.a)({theme:"dark"===r?"psu-dark":"psu-light",language:"powershell",loading:Object(R.jsx)(g.a,{tip:"Loading content..."}),height:"calc((100vh - 256px) - 48px)",onMount:function(e,n){return i(e,n,null)}},n))}function z(e){var n=e.title,t=e.options,i=e.showSave,a=void 0===i||i,u=e.actions,l=e.hideToolbar,s=Object(r.a)(e,["title","options","showSave","actions","hideToolbar"]),h=d.a.useContext(D),m=h.handleEditorDidMount,C=h.currentTheme,y=h.onSave,w=h.onCopy,I=h.zoomIn,S=h.zoomOut,T=h.isSaving,A=Object(M.j)().resource;return Object(R.jsx)(p.a,{bordered:!1,bodyStyle:{padding:0},title:n,extra:!l&&Object(R.jsxs)(c.Fragment,{children:[u,Object(R.jsx)(v.a,{title:"Zoom in",children:Object(R.jsx)(f.a,{type:"text",icon:Object(R.jsx)(j.a,{}),onClick:function(){return I()}})}),Object(R.jsx)(v.a,{title:"Zoom out",children:Object(R.jsx)(f.a,{type:"text",icon:Object(R.jsx)(O.a,{}),onClick:function(){return S()}})}),a&&Object(R.jsx)(F,{resource:A,children:Object(R.jsx)(f.a,{icon:T?Object(R.jsx)(k.a,{}):null,onClick:Object(b.a)((function(){var e;return y(null===A||void 0===A||null===(e=A.resourceInfo)||void 0===e?void 0:e.parent,"update",A)}))})}),Object(R.jsx)(v.a,{title:"Copy",children:Object(R.jsx)(f.a,{type:"text",icon:Object(R.jsx)(x.a,{}),onClick:function(){return w()}})}),Object(R.jsx)(M.b,{children:Object(R.jsx)(f.a,{})})]}),children:Object(R.jsx)(N,Object(o.a)(Object(o.a)({language:"powershell",height:"calc((100vh - 256px) - 48px)",value:(null===A||void 0===A?void 0:A.content)||(null===A||void 0===A?void 0:A.scriptBlock)||(null===A||void 0===A?void 0:A.settings)||(null===s||void 0===s?void 0:s.value),onMount:function(e,n){return m(e,n,A)},theme:"dark"===C?"psu-dark":"psu-light",loading:(null===s||void 0===s?void 0:s.loading)||Object(R.jsx)(g.a,{tip:"Loading content..."})},s),{},{options:Object(o.a)({wordWrap:"on",wrappingIndent:"same",minimap:{enabled:!1},lineHeight:20,lineNumbersMinChars:5,scrollBeyondLastLine:!1,hideCursorInOverviewRuler:!0,overviewRulerLanes:0,overviewRulerBorder:!1},t)}))})}}}]);
//# sourceMappingURL=28.4dabb6e0.chunk.js.map