(this["webpackJsonppowershelluniversal.adminconsole"]=this["webpackJsonppowershelluniversal.adminconsole"]||[]).push([[16,1,2,6],{1006:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(12),r=n(76),c=(n(0),n(98)),o=n(95),i=n(74),l=n(38),s=n(600),d=n(56),u=n(4);function f(e){var t=e.to,n=e.accessControls,f=e.allowedWithOneWayGitSync,h=Object(r.a)(e,["to","accessControls","allowedWithOneWayGitSync"]);return Object(u.jsx)(c.a,{requiredRoles:["Administrator","Operator"],requiredAccessControls:d.a.Edit,accessControls:n,allowedWithOneWayGitSync:f,children:Object(u.jsx)(o.a,{title:"Edit Details",children:Object(u.jsx)(l.b,{to:t,children:Object(u.jsx)(i.a,Object(a.a)({type:"text",icon:Object(u.jsx)(s.a,{})},h))})})})}},1371:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return pe}));var a=n(25),r=n(49),c=n.n(r),o=n(86),i=n(0),l=n.n(i),s=n(301),d=n(457),u=n(288),f=n(6),h=n(7),v=n(13),j=n(24),b=n(26),m=n(30),p=n(31),O=n(9),x=n.n(O),y=n(180),C=n.n(y),w=n(66),g=n(79),I=n(10),k=i.forwardRef((function(e,t){var n,a=e.prefixCls,r=e.forceRender,c=e.className,o=e.style,l=e.children,s=e.isActive,d=e.role,u=i.useState(s||r),f=Object(I.a)(u,2),v=f[0],j=f[1];return i.useEffect((function(){(r||s)&&j(!0)}),[r,s]),v?i.createElement("div",{ref:t,className:x()("".concat(a,"-content"),(n={},Object(h.a)(n,"".concat(a,"-content-active"),s),Object(h.a)(n,"".concat(a,"-content-inactive"),!s),n),c),style:o,role:d},i.createElement("div",{className:"".concat(a,"-content-box")},l)):null}));k.displayName="PanelContent";var N=k,S=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.apply(this,arguments)).handleItemClick=function(){var t=e.props,n=t.onItemClick,a=t.panelKey;"function"===typeof n&&n(a)},e.handleKeyPress=function(t){"Enter"!==t.key&&13!==t.keyCode&&13!==t.which||e.handleItemClick()},e}return Object(b.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!C()(this.props,e)}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.className,c=a.id,o=a.style,l=a.prefixCls,s=a.header,d=a.headerClass,u=a.children,f=a.isActive,v=a.showArrow,j=a.destroyInactivePanel,b=a.accordion,m=a.forceRender,p=a.openMotion,O=a.expandIcon,y=a.extra,C=a.collapsible,w="disabled"===C,I=x()("".concat(l,"-header"),(e={},Object(h.a)(e,d,d),Object(h.a)(e,"".concat(l,"-header-collapsible-only"),"header"===C),e)),k=x()((t={},Object(h.a)(t,"".concat(l,"-item"),!0),Object(h.a)(t,"".concat(l,"-item-active"),f),Object(h.a)(t,"".concat(l,"-item-disabled"),w),t),r),S=i.createElement("i",{className:"arrow"});return v&&"function"===typeof O&&(S=O(this.props)),i.createElement("div",{className:k,style:o,id:c},i.createElement("div",{className:I,onClick:function(){return"header"!==C&&n.handleItemClick()},role:b?"tab":"button",tabIndex:w?-1:0,"aria-expanded":f,onKeyPress:this.handleKeyPress},v&&S,"header"===C?i.createElement("span",{onClick:this.handleItemClick,className:"".concat(l,"-header-text")},s):s,y&&i.createElement("div",{className:"".concat(l,"-extra")},y)),i.createElement(g.b,Object.assign({visible:f,leavedClassName:"".concat(l,"-content-hidden")},p,{forceRender:m,removeOnLeave:j}),(function(e,t){var n=e.className,a=e.style;return i.createElement(N,{ref:t,prefixCls:l,className:n,style:a,isActive:f,forceRender:m,role:b?"tabpanel":null},u)})))}}]),n}(i.Component);S.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var P=S;function W(e){var t=e;return Array.isArray(t)||(t=t?[t]:[]),t.map((function(e){return String(e)}))}var A=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(j.a)(this,n),(a=t.call(this,e)).onClickItem=function(e){var t=a.state.activeKey;if(a.props.accordion)t=t[0]===e?[]:[e];else{var n=(t=Object(v.a)(t)).indexOf(e);n>-1?t.splice(n,1):t.push(e)}a.setActiveKey(t)},a.getNewChild=function(e,t){if(!e)return null;var n=a.state.activeKey,r=a.props,c=r.prefixCls,o=r.openMotion,l=r.accordion,s=r.destroyInactivePanel,d=r.expandIcon,u=r.collapsible,f=e.key||String(t),h=e.props,v=h.header,j=h.headerClass,b=h.destroyInactivePanel,m=h.collapsible,p=null!==m&&void 0!==m?m:u,O={key:f,panelKey:f,header:v,headerClass:j,isActive:l?n[0]===f:n.indexOf(f)>-1,prefixCls:c,destroyInactivePanel:null!==b&&void 0!==b?b:s,openMotion:o,accordion:l,children:e.props.children,onItemClick:"disabled"===p?null:a.onClickItem,expandIcon:d,collapsible:p};return"string"===typeof e.type?e:i.cloneElement(e,O)},a.getItems=function(){var e=a.props.children;return Object(w.a)(e).map(a.getNewChild)},a.setActiveKey=function(e){"activeKey"in a.props||a.setState({activeKey:e}),a.props.onChange(a.props.accordion?e[0]:e)};var r=e.activeKey,c=e.defaultActiveKey;return"activeKey"in e&&(c=r),a.state={activeKey:W(c)},a}return Object(b.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!C()(this.props,e)||!C()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,a=t.className,r=t.style,c=t.accordion,o=x()((e={},Object(h.a)(e,n,!0),Object(h.a)(e,a,!!a),e));return i.createElement("div",{className:o,style:r,role:c?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=W(e.activeKey)),t}}]),n}(i.Component);A.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},A.Panel=P;var E=A,K=(A.Panel,n(140)),M=n(41),G=n(81),L=n(33),R=function(e){Object(L.a)(!("disabled"in e),"Collapse.Panel",'`disabled` is deprecated. Please use `collapsible="disabled"` instead.');var t=i.useContext(G.b).getPrefixCls,n=e.prefixCls,a=e.className,r=void 0===a?"":a,c=e.showArrow,o=void 0===c||c,l=t("collapse",n),s=x()(Object(h.a)({},"".concat(l,"-no-arrow"),!o),r);return i.createElement(E.Panel,Object(f.a)({},e,{prefixCls:l,className:s}))},F=n(70),q=n(36),_=function(e){var t,n=i.useContext(G.b),a=n.getPrefixCls,r=n.direction,c=e.prefixCls,o=e.className,l=void 0===o?"":o,s=e.bordered,d=void 0===s||s,u=e.ghost,v=a("collapse",c),j=function(){var t=e.expandIconPosition;return void 0!==t?t:"rtl"===r?"right":"left"}(),b=x()((t={},Object(h.a)(t,"".concat(v,"-borderless"),!d),Object(h.a)(t,"".concat(v,"-icon-position-").concat(j),!0),Object(h.a)(t,"".concat(v,"-rtl"),"rtl"===r),Object(h.a)(t,"".concat(v,"-ghost"),!!u),t),l),m=Object(f.a)(Object(f.a)({},F.a),{motionAppear:!1,leavedClassName:"".concat(v,"-content-hidden")});return i.createElement(E,Object(f.a)({openMotion:m},e,{expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.expandIcon,a=n?n(t):i.createElement(K.a,{rotate:t.isActive?90:void 0});return i.createElement("div",null,Object(q.a)(a,(function(){return{className:x()(a.props.className,"".concat(v,"-arrow"))}})))},prefixCls:v,className:b}),function(){var t=e.children;return Object(w.a)(t).map((function(e,t){var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var a=e.key||String(t),r=e.props,c=r.disabled,o=r.collapsible,i=Object(f.a)(Object(f.a)({},Object(M.a)(e.props,["disabled"])),{key:a,collapsible:null!==o&&void 0!==o?o:c?"disabled":void 0});return Object(q.a)(e,i)}return e}))}())};_.Panel=R;var D=_,U=n(939),V=n(455),B=n(95),J=n(74),T=n(941),Q=n(691),z=n(423),H=n(924),X=n(56),Y=n(473),Z=n(623),$=n(131),ee=n(212),te=n(4);function ne(){var e=Object($.e)(),t=e.onOk,n=e.form;return Object(te.jsxs)(i.Fragment,{children:[Object(te.jsx)($.d,{requiredRoles:["Administrator"],requiredAccessControls:X.a.Create,allowedWithOneWayGitSync:!1,children:Object(te.jsx)(J.a,{children:"Create New Module"})}),Object(te.jsx)($.b,{title:"Create new module",onClickOk:function(){t("/module","create",{})},formName:"create_module_form",children:Object(te.jsx)(ee.b,{schemaName:"module",children:Object(te.jsx)(ee.d,{name:"create_module_form",form:n,preserve:!1})})})]})}var ae=n(982),re=n(462),ce=n(1006),oe=n(115),ie=n(992),le=n(122),se=n.n(le),de=n(22),ue=s.default.Option;function fe(e,t,n){return n.indexOf(e)===t}var he=[{title:"Name",dataIndex:"name",key:"name",onFilter:function(e,t){return t.name.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.name.localeCompare(t.name)},width:100},{title:"Version",dataIndex:"version",key:"version",onFilter:function(e,t){return t.version.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.version.localeCompare(t.version)},width:100},{title:"Path",dataIndex:"path",key:"path",onFilter:function(e,t){return t.path.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.path.localeCompare(t.path)},width:"60%"},{title:"Source",dataIndex:"source",key:"source",render:function(e,t){return 1===t.source?Object(te.jsx)("span",{children:"PowerShell Gallery"}):Object(te.jsx)("span",{children:"Local"})}},{width:"fit-content",dataIndex:"actions",render:function(e,t){return t.readOnly?Object(te.jsx)(te.Fragment,{}):Object(te.jsxs)(d.b,{children:[0===t.source&&Object(te.jsx)($.a,{children:Object(te.jsx)(ae.default,{record:t,allowedWithOneWayGitSync:!1})}),Object(te.jsx)(re.default,{resource:t,allowedWithOneWayGitSync:!1}),0===t.source&&Object(te.jsx)(ce.default,{allowedWithOneWayGitSync:!1,accessControls:null===t||void 0===t?void 0:t.accessControls,to:"/admin/platform/module/"+(null===t||void 0===t?void 0:t.id)})]})}}],ve=function(e){var t=e.search,n=Object(z.a)("/module"),a=n.data;if(n.isLoading)return Object(te.jsx)(u.a,{});var r=""===t?a:a.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})),c=a.filter((function(e){return e.readOnly})).map((function(e){return e.environment})).filter(fe),o=function(e,t){var n=new Map;return e.forEach((function(e){var a=t(e),r=n.get(a);r?r.push(e):n.set(a,[e])})),n}(r,(function(e){return e.environment})),i=a.filter((function(e){return!e.readOnly}));return Object(te.jsx)(d.b,{direction:"vertical",style:{width:"100%"},children:Object(te.jsxs)(D,{accordion:!0,children:[c.map((function(e){var t=o.get(e);return Object(te.jsx)(D.Panel,{header:"".concat(e," (").concat(t?t.length:0," modules)"),children:Object(te.jsx)(U.a,{dataSource:t,columns:he,tableLayout:"fixed"},e)},e)})),i.length>0&&Object(te.jsx)(D.Panel,{header:"Universal Modules (".concat(i?i.length:0," modules)"),children:Object(te.jsx)(U.a,{dataSource:i,columns:he,tableLayout:"fixed"},"psuModulesTable")},"psuModules")]})})},je=function(e){var t=e.name,n=e.version,a=Object(H.a)(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.a.post("/api/v1/module/save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){V.b.success("Saved module!"),de.a.refetchQueries("/dashboard/marketplace")}}),r=a.mutateAsync,i=a.isLoading;return Object(te.jsx)(B.a,{title:"Install",children:Object(te.jsx)(J.a,{type:"text",icon:Object(te.jsx)(Y.a,{}),onClick:function(){return r({name:t,version:n})},loading:i})})},be=[{title:"Name",dataIndex:"name",key:"name",onFilter:function(e,t){return t.name.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.name.localeCompare(t.name)},width:100},{title:"Version",dataIndex:"version",key:"version",onFilter:function(e,t){return t.version.startsWith(e)},filterSearch:!0,sorter:function(e,t){return e.version.localeCompare(t.version)},width:100},{width:"fit-content",dataIndex:"actions",render:function(e,t){return Object(te.jsx)(je,{name:t.name,version:t.version})}}],me=function(e){var t=e.search,n=Object(z.a)("/module/find/".concat(t),{enabled:!!t}),a=n.data,r=n.isLoading;return Object(te.jsx)(d.b,{direction:"vertical",style:{width:"100%"},children:Object(te.jsx)(U.a,{dataSource:a,columns:be,loading:r})})};function pe(){var e=Object(oe.a)().licensed,t=l.a.useState(""),n=Object(a.a)(t,2),r=n[0],c=n[1],o=l.a.useState("local"),i=Object(a.a)(o,2),d=i[0],u=i[1];return e(X.d.Automation)?Object(te.jsxs)(T.a,{title:"Modules",subTitle:"Manage PowerShell Modules for your PowerShell Universal environment.",extra:["local"===d&&Object(te.jsx)($.a,{children:Object(te.jsx)(ne,{})}),Object(te.jsx)(J.a,{icon:Object(te.jsx)(Z.a,{}),href:"https://docs.powershelluniversal.com/platform/modules",target:"_blank",children:"Documentation"})],children:[Object(te.jsxs)(Q.default.Group,{compact:!0,children:[Object(te.jsxs)(s.default,{defaultValue:"local",style:{width:"15%"},onChange:function(e){return u(e)},children:[Object(te.jsx)(ue,{value:"local",children:"Local"}),Object(te.jsx)(ue,{value:"psgallery",children:"PowerShell Gallery"})]}),Object(te.jsx)(Q.default.Search,{allowClear:!0,onSearch:function(e){return c(e)},placeholder:"Search",style:{width:"85%"}})]}),"local"===d&&Object(te.jsx)(ve,{search:r}),"psgallery"===d&&Object(te.jsx)(me,{search:r})]}):Object(te.jsx)(ie.default,{title:"Modules are only available for licensed instances."})}},978:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var a=n(925),r=n(457),c=n(422),o=n(4);function i(){return Object(o.jsx)(a.a,{type:"info",message:Object(o.jsxs)(r.b,{align:"center",style:{width:"100%",justifyContent:"space-between"},children:["Authentication requires a license.",Object(o.jsx)(c.a.Link,{href:"https://ironmansoftware.com/powershell-universal/?rel=product",target:"_blank",children:"Buy License."})]})})}},982:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(12),r=n(76),c=(n(0),n(56)),o=n(74),i=n(212),l=n(463),s=n(131),d=n(303),u=n(978),f=n(115),h=n(4);function v(e){var t,n=e.record,v=e.schemaName,j=e.allowedWithOneWayGitSync,b=Object(r.a)(e,["record","schemaName","allowedWithOneWayGitSync"]),m=Object(l.a)().getButtonProps,p=Object(d.a)(),O=Object(s.e)(),x=O.onOk,y=O.form,C=Object(f.a)().licensed;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.d,{requiredRoles:["Administrator","Operator"],requiredAccessControls:c.a.Edit,accessControls:b.accessControls,allowedWithOneWayGitSync:j,children:Object(h.jsx)(o.a,Object(a.a)(Object(a.a)(Object(a.a)({},b),m({action:"edit"})),{},{action:"edit"}))}),Object(h.jsxs)(s.b,{title:"Edit Resource",onClickOk:function(){var e,t,a,r,c,o,i,l,s,d,u,f="tag"===(null===n||void 0===n||null===(e=n.resourceInfo)||void 0===e?void 0:e.schemaName)||"role"===(null===n||void 0===n||null===(t=n.resourceInfo)||void 0===t?void 0:t.schemaName)||"endpoint"===(null===n||void 0===n||null===(a=n.resourceInfo)||void 0===a?void 0:a.schemaName)||"ratelimit"===(null===n||void 0===n||null===(r=n.resourceInfo)||void 0===r?void 0:r.schemaName)||"dashboard"===(null===n||void 0===n||null===(c=n.resourceInfo)||void 0===c?void 0:c.schemaName)||"schedule"===(null===n||void 0===n||null===(o=n.resourceInfo)||void 0===o?void 0:o.schemaName)||"publishedfolder"===(null===n||void 0===n||null===(i=n.resourceInfo)||void 0===i?void 0:i.schemaName)?null===n||void 0===n||null===(l=n.resourceInfo)||void 0===l?void 0:l.self:null===n||void 0===n||null===(s=n.resourceInfo)||void 0===s?void 0:s.parent;"page"===(null===n||void 0===n||null===(d=n.resourceInfo)||void 0===d?void 0:d.schemaName)&&(f=(null===n||void 0===n||null===(u=n.resourceInfo)||void 0===u?void 0:u.self)+"?ignoreContent=true"),x(f,"update",n)},children:[Object(h.jsx)(i.b,{schemaName:v||(null===n||void 0===n||null===(t=n.resourceInfo)||void 0===t?void 0:t.schemaName),children:Object(h.jsx)(i.d,{name:"edit_form",form:y,inEditMode:!0,preserve:!1,defaultValues:p(n)})}),!C(c.d.Dashboard)&&Object(h.jsx)(u.a,{})]})]})}},992:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));n(0);var a=n(922),r=n(74),c=n(604),o=n(4);function i(e){var t=e.title;return Object(o.jsx)(a.a,{title:t,status:"warning",extra:Object(o.jsx)(r.a,{icon:Object(o.jsx)(c.a,{}),onClick:function(){window.location.href="https://ironmansoftware.com/powershell-universal?rel=product"},children:"Buy License"})})}}}]);
//# sourceMappingURL=16.16aa0cbc.chunk.js.map