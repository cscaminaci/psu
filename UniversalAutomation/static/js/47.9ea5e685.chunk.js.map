{"version":3,"sources":["components/settings/LoginPageSettings.tsx","components/pages/notLicensed.tsx"],"names":["LoginPageSettings","Form","useForm","form","licensed","useAppStore","useQuery","loginPage","data","isLoading","useMutation","onSuccess","queryClient","invalidateQueries","update","mutate","isUpdateLoading","Feature","Automation","Content","style","padding","ghost","title","subTitle","extra","icon","href","target","size","direction","width","bordered","loading","onFinish","values","key","action","name","labelCol","span","wrapperCol","labelAlign","initialValues","getFieldValue","src","alt","Item","label","tooltip","type","htmlType","NotLicensed","status","onClick","window","location"],"mappings":"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","file":"static/js/47.9ea5e685.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {\r\n  Card,\r\n  Input,\r\n  Form,\r\n  Layout,\r\n  Space,\r\n  Button,\r\n  PageHeader,\r\n} from \"antd\";\r\nimport { Feature, LoginPage } from \"../../types\";\r\nimport { useQuery } from \"react-query3\";\r\nimport queryClient, { useMutation } from \"../utils/queryClient\";\r\nimport useAppStore from \"../context/app/Hooks\";\r\nimport NotLicensed from \"components/pages/notLicensed\";\r\nimport { LinkOutlined, SaveOutlined } from \"@ant-design/icons\";\r\n\r\nexport default function LoginPageSettings() {\r\n  const [form] = Form.useForm();\r\n  const { licensed } = useAppStore();\r\n  const { data: loginPage, isLoading } = useQuery<LoginPage>(\"/loginPage\");\r\n  const { mutate: update, isLoading: isUpdateLoading } = useMutation({\r\n    onSuccess: () => queryClient.invalidateQueries(\"/loginPage\"),\r\n  });\r\n\r\n  const isLicensed = licensed(Feature.Automation);\r\n\r\n  function onFinish(values) {\r\n    update({\r\n      key: \"/loginPage\",\r\n      action: \"update\",\r\n      ...{\r\n        ...loginPage,\r\n        ...values,\r\n      },\r\n    });\r\n  }\r\n\r\n  return isLicensed ? (\r\n\r\n    <Layout>\r\n      <Layout.Content style={{ padding: 24 }}>\r\n        <PageHeader\r\n          ghost={true}\r\n          title={\"Login Page\"}\r\n          subTitle={\"Setup a custom login page for forms authentication.\"}\r\n          extra={[\r\n            <Button icon={<LinkOutlined />} href=\"https://docs.powershelluniversal.com/config/login-page\" target=\"_blank\">Documentation</Button>\r\n          ]} />\r\n        <Space size=\"large\" direction=\"vertical\" style={{ width: \"100%\" }}>\r\n          <Card bordered={false} loading={isLoading}>\r\n            <Form\r\n              form={form}\r\n              onFinish={onFinish}\r\n              name=\"main_loginpagesettings_form\"\r\n              labelCol={{ span: 8 }}\r\n              wrapperCol={{ span: 16 }}\r\n              labelAlign=\"left\"\r\n              initialValues={{\r\n                ...loginPage\r\n              }}\r\n            >\r\n              {form.getFieldValue(\"image\") && <img src={form.getFieldValue(\"image\")} alt=\"logo\" />}\r\n              <Form.Item\r\n                name=\"image\"\r\n                label=\"Image\"\r\n                tooltip=\"URL to an image to display on the login page.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              {form.getFieldValue(\"appBarLogo\") && <img src={form.getFieldValue(\"appBarLogo\")} alt=\"appBarLogo\" />}\r\n              <Form.Item\r\n                name=\"appBarLogo\"\r\n                label=\"App Bar Logo\"\r\n                tooltip=\"URL to an image to display within the app bar.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"title\"\r\n                label=\"Title\"\r\n                tooltip=\"Title text to display.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"primaryColor\"\r\n                label=\"Primary Color\"\r\n                tooltip=\"Primary Color.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"secondaryColor\"\r\n                label=\"Secondary Color\"\r\n                tooltip=\"Secondary Color.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"headerColor\"\r\n                label=\"Header Color\"\r\n                tooltip=\"Header Color.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"primaryFontColor\"\r\n                label=\"Primary Font Color\"\r\n                tooltip=\"Primary Font Color.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"secondaryFontColor\"\r\n                label=\"Secondary Font Color\"\r\n                tooltip=\"Secondary Font Color.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"headerFontColor\"\r\n                label=\"Header Font Color\"\r\n                tooltip=\"Header Font Color.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"copyright\"\r\n                label=\"Copyright\"\r\n                tooltip=\"Copyright text to display at the bottom of the page.\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Space direction=\"horizontal\">\r\n                  <Button\r\n                    loading={isUpdateLoading}\r\n                    type=\"primary\"\r\n                    htmlType=\"submit\"\r\n                    icon={<SaveOutlined />}\r\n                  >\r\n                    Save Changes\r\n                  </Button>\r\n                  <Button href=\"/login\" target=\"_blank\">\r\n                    View\r\n                  </Button>\r\n                </Space>\r\n              </Form.Item>\r\n            </Form>\r\n          </Card>\r\n        </Space>\r\n      </Layout.Content>\r\n    </Layout>\r\n  ) : (\r\n    <NotLicensed title=\"Custom login pages are only available for licensed instances.\" />\r\n  );;\r\n}\r\n","import React from \"react\";\r\nimport { Result, Button } from \"antd\";\r\nimport { CreditCardOutlined } from \"@ant-design/icons\";\r\n\r\nexport default function NotLicensed({ title }) {\r\n  return (\r\n    <Result\r\n      title={title}\r\n      status=\"warning\"\r\n      extra={\r\n        <Button\r\n          icon={<CreditCardOutlined />}\r\n          onClick={() => {\r\n            window.location.href =\r\n              \"https://ironmansoftware.com/powershell-universal?rel=product\";\r\n          }}\r\n        >\r\n          Buy License\r\n        </Button>\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"sourceRoot":""}